<div id="substitute_ERCview" class="substitute_ERCsubstituteOptionsview">

<!-- list of similar compendia -->
  <md-card ng-if="vm.similarPubs">
    <md-card-content>
      <md-list>

        <md-list-item class="md-2-line" ng-repeat="pub in vm.similarPubs">
          <div class="md-list-item-text" layout="column">
            <div flex="100" id="substitutionErcSelectionViewTitle">
              <md-button ui-sref="erc({ercid: pub.id})" title="{{pub.metadata.o2r.title}}" target="_blank"><b class="search-clickOnName">{{pub.metadata.o2r.title | cutLongName : vm.divWidth}}</b></md-button>
            </div>
            <div class="md-list-item-text" layout="row">
              <div flex="70" id="substitutionErcSelectionViewAddData">
                <p flex><b>Created on:</b> {{pub.created | date : 'yyyy-MM-dd HH:mm'}}</p>
                <p flex><b>by</b> {{pub.user}}</p>
                <p flex>{{pub.metadata.raw.description}}</p>
              </div>
              <div flex="30">
                <md-button title="substitution options" class="md-raised" ng-click="substituteOptions($event, pub)"><md-icon aria-label md-svg-src="{{vm.icons.substitution_options}}"></md-icon></md-button>
              </div>
            </div>
          </div>

          <md-divider ng-if="!($last)"></md-divider>
        </md-list-item>

      </md-list>
    </md-card-content>
  </md-card>
</div>

  <!-- Message if not a single compendium has been uploaded yet -->
  <md-card ng-if="!vm.similarPubs">
    <md-card-content>
      <span>No similar compendia.</span>
    </md-card-content>
  </md-card>

<div style="visibility: hidden">
  <div class="md-dialog-container" id="showCandidateView">
    <md-dialog class="substitute_candidate" aria-label="options dialog">
      <!-- <md-dialog-content layout-padding> -->

        <o2r-substitute-candidate o2r-base="vm.basefiles" o2r-overlay="vm.overlayfiles" o2r-base-title="{{vm.base.metadata.o2r.title}}" o2r-overlay-title="{{vm.overlay.metadata.o2r.title}}" o2r-base-id="{{vm.base.id}}" o2r-overlay-id="{{vm.overlay.id}}"></o2r-substitute-candidate>

      <!-- </md-dialog-content> -->
    </md-dialog>
  </div>
</div>
