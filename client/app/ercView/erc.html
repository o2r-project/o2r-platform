<div layout="column">
	<!--
	<div layout="row" flex="30">
		<md-card>
			<md-card-content layout="column">
			</md-card-content>
		</md-card>
	</div>
-->
	<div layout="row">
		<!-- folder tree -->
		<div layout="column" flex="30">
		<md-card>
			<md-card-content>
				<div layout="row">
					<h3 class="erc-comptitle">{{vm.publication.metadata.o2r.title}}</h3>
					<span flex></span>
					<o2r-erc-download erc-id="{{vm.ercId}}"></o2r-erc-download>
				</div>
				<md-divider></md-divider>
				<div id="erc-treediv">
					<div layout="row">
						<span flex></span>
						<md-checkbox ng-model="vm.hideBagit" aria-label="Hide Bagit">
							Hide Bagit files
						</md-checkbox>
					</div>
					<treecontrol class="tree-classic" tree-model="vm.bagitToggle(vm.publication.files, vm.hideBagit)" options="vm.treeOptions" on-selection="showSelected(node)" on-node-toggle="showToggle(node, expanded, $parentNode, $index, $first, $middle, $last, $odd, $even, $path)" selected-node="node1">
						<span ng-click="vm.setOne(node.path)" analytics-category="ERC" analytics-on="click" analytics-event="show file {{node.name}}">{{node.name}}</span>
					</treecontrol>
				</div>
				<md-button ng-show="vm.stillToArchive() && vm.loggedIn" ng-click="vm.sendToZenodo()">Ship to Zenodo<md-icon aria-label md-svg-src="{{vm.icons.rowing}}"></md-icon></md-button>
			</md-card-content>
		</md-card>

			<!-- Analysis -->
			<o2r-analysis-stats o2r-finished="{{vm.fJob}}" o2r-started="{{vm.sJob}}" flex="30"></o2r-analysis-stats>

		</div>

		<!-- Content -->
		<div layout="column" flex="65" flex-offset="5">
		<md-card>
			<md-card-header>
				<md-card-header-text class="md-title" layout="row">
					<span>{{vm.oneFile.path | cutPath}}</span>
					<span flex></span>
					<!-- Menu for downloading single file or copying absolute path -->
					<md-menu ng-if="vm.oneFile.path">
						<md-button class="md-icon-button" aria-label="show file path or download file" ng-click="vm.openMenu($mdOpenMenu, $event)">
							<md-icon md-menu-origin md-svg-src="{{vm.icons.menu}}" class="o2r-icon"></md-icon>
						</md-button>
						<md-menu-content width="4">
							<md-menu-item>
								<md-input-container class="md-icon-float md-block">
									<label></label>
									<md-icon md-svg-src="{{vm.icons.copy}}" class="o2r-icon"></md-icon>
									<input type="text" value="{{vm.server + vm.oneFile.path}}" onClick="this.select();" ng-readonly="true">
								</md-input-container>
							</md-menu-item>
							<md-menu-divider></md-menu-divider>
							<md-menu-item>
								<md-button ng-href="{{vm.oneFile.path}}" download>
									<md-icon flex="10" md-svg-src="{{vm.icons.download}}" class="o2r-icon"></md-icon>
									Download file
								</md-button>
							</md-menu-item>
						</md-menu-content>
					</md-menu>

				</md-card-header-text>
			</md-card-header>
			<md-card-content>
				<o2r-display-files o2r-file="{{vm.oneFile}}"></o2r-display-files>
			</md-card-content>
		</md-card>
		</div>
	</div>
</div>
